# Order Tracking Application

Приложение для отслеживания статуса заказов. Backend на .NET 8, frontend на React с TypeScript.

## Запуск

Требуется Docker и Docker Compose.

```bash
docker-compose up -d
```

После запуска приложение доступно по адресам:
- **Frontend**: http://localhost:3001
- **Backend API**: http://localhost:5000
- **Swagger**: http://localhost:5000/swagger
- **RabbitMQ Management**: http://localhost:15672 (логин: guest, пароль: guest)

Остановка:
```bash
docker-compose down
```

Просмотр логов:
```bash
docker-compose logs -f
```

## API

### Заказы

- `GET /api/orders` - Получить все заказы
- `GET /api/orders/{id}` - Получить заказ по ID
- `POST /api/orders` - Создать новый заказ
- `PUT /api/orders/{id}/status` - Обновить статус заказа

Все ответы возвращаются в формате:
```json
{
  "isSuccess": true,
  "value": { ... },
  "error": "сообщение об ошибке",
  "errorCode": 400
}
```

### WebSocket

SignalR Hub для получения уведомлений об изменении статуса заказов:
- `ws://localhost:5000/orderTrackingHub`

При изменении статуса заказа клиенты автоматически получают событие `OrderStatusChanged`.

## Статусы заказов

- **Created (0)** - Создан
- **Sent (1)** - Отправлен
- **Delivered (2)** - Доставлен
- **Cancelled (3)** - Отменен

## Функциональность

1. **Создание заказов** - создание нового заказа с номером и описанием
2. **Просмотр заказов** - список всех заказов с их статусами
3. **Детали заказа** - просмотр детальной информации о заказе
4. **Обновление статуса** - изменение статуса заказа
5. **Уведомления в реальном времени** - автоматическое обновление статуса через WebSocket при изменении
6. **Асинхронная обработка** - события изменения статуса отправляются в RabbitMQ для асинхронной обработки

## Frontend

### Компоненты

**OrderList** - главная страница со списком всех заказов:
- Отображает все заказы с их статусами
- При клике на заказ переходит на страницу деталей
- Автоматически обновляется при изменении статуса через WebSocket

**OrderDetails** - страница деталей заказа:
- Показывает полную информацию о заказе
- Позволяет изменить статус заказа
- Отображает историю изменений (createdAt, updatedAt)
- Получает обновления в реальном времени через WebSocket

**CreateOrder** - форма создания нового заказа:
- Поля: номер заказа (обязательно), описание (обязательно)
- После создания перенаправляет на страницу деталей заказа

### Навигация

- `/` - список заказов
- `/create` - создание заказа
- `/orders/:id` - детали заказа

### WebSocket подключение

WebSocket подключается автоматически при загрузке приложения. Соединение управляется через Redux slice `websocketSlice`:
- Автоматическое переподключение при разрыве
- Обработка событий `OrderStatusChanged` от сервера
- Обновление состояния заказов в реальном времени

### API клиент

Все запросы к бэкенду вынесены в отдельную папку `api/`:
- `api/client.ts` - базовый axios клиент с обработкой ошибок
- `api/ordersApi.ts` - функции для работы с заказами

Это позволяет переиспользовать API функции и упрощает тестирование.
